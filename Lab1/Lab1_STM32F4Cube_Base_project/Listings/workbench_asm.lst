


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             text, CODE, READONLY
    2 00000000                 IMPORT           Kalmanfilter_asm
    3 00000000                 EXPORT           workbench_asm
    4 00000000         
    5 00000000         ; function workbench_asm
    6 00000000         ; inputs:
    7 00000000         ; -------
    8 00000000         ; none
    9 00000000         ;
   10 00000000         ; outputs:
   11 00000000         ; --------
   12 00000000         ; none
   13 00000000         workbench_asm
   14 00000000 B530            PUSH             {R4-R5, LR}
   15 00000002 4824            LDR              R0, =InputArray
   16 00000004 4924            LDR              R1, =init_InputArray
   17 00000006 F04F 0200       MOV              R2, #0
   18 0000000A         
   19 0000000A         ; initialize input array
   20 0000000A         loop1
   21 0000000A 2A06            CMP              R2, #6
   22 0000000C D00A            BEQ              end_loop1
   23 0000000E ED91 0A00       VLDR.f32         S0, [R1]
   24 00000012 ED80 0A00       VSTR.f32         S0, [R0]
   25 00000016 F100 0004       ADD              R0, R0, #4
   26 0000001A F101 0104       ADD              R1, R1, #4
   27 0000001E F102 0201       ADD              R2, R2, #1
   28 00000022 E7F2            B                loop1
   29 00000024         end_loop1
   30 00000024 481D            LDR              R0, =kstate
   31 00000026 491E            LDR              R1, =init_kstate
   32 00000028 F04F 0200       MOV              R2, #0
   33 0000002C         
   34 0000002C         ; initialize kstate
   35 0000002C         loop2
   36 0000002C 2A05            CMP              R2, #5
   37 0000002E D00A            BEQ              end_loop2
   38 00000030 ED91 0A00       VLDR.f32         S0, [R1]
   39 00000034 ED80 0A00       VSTR.f32         S0, [R0]
   40 00000038 F100 0004       ADD              R0, R0, #4
   41 0000003C F101 0104       ADD              R1, R1, #4
   42 00000040 F102 0201       ADD              R2, R2, #1
   43 00000044 E7F2            B                loop2
   44 00000046         end_loop2
   45 00000046         
   46 00000046         ; call Kalmanfilter_asm multiple times in a loop for tim
                       ing measurements
   47 00000046 F04F 0501       MOV              R5, #1
   48 0000004A         big_loop
   49 0000004A 2D00            CMP              R5, #0
   50 0000004C D009            BEQ              end_big_loop
   51 0000004E         ; call Kalmanfilter_asm
   52 0000004E 4811            LDR              R0, =InputArray
   53 00000050 4914            LDR              R1, =OutputArray
   54 00000052 F04F 0205       MOV              R2, #5
   55 00000056 4B11            LDR              R3, =kstate
   56 00000058 4C15            LDR              R4, =Kalmanfilter_asm
   57 0000005A 47A0            BLX              R4
   58 0000005C F1A5 0501       SUB              R5, R5, #1



ARM Macro Assembler    Page 2 


   59 00000060 E7F3            B                big_loop
   60 00000062         end_big_loop
   61 00000062         ; Return
   62 00000062 E8BD 4030       POP              {R4-R5, LR}
   63 00000066 4770            BX               LR
   64 00000068         
   65 00000068         ; Initialized array and struct kstate
   66 00000068                 ALIGN
   67 00000068 3F800000 
              3FC00000 
              00000000 
              3F47AE14 
              3FA8F5C3 
              3FB851EC init_InputArray
                               DCFS             1.0, 1.5, 0.0, 0.78, 1.32, 1.44
   68 00000080 3DCCCCCD 
              3DCCCCCD 
              00000000 
              3DCCCCCD 
              00000000 init_kstate
                               DCFS             0.1, 0.1, 0.0, 0.1, 0.0
   69 00000094         
   70 00000094 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000         AREA             myData, DATA, READWRITE
   71 00000000         
   72 00000000                 ALIGN
   73 00000000 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 InputArray
                               SPACE            6*4         ; 6 floats
   74 00000018 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 OutputArray
                               SPACE            6*4
   75 00000030 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00    kstate  SPACE            5*4         ; kstate[0] = q, ks
                                                            tate[1] = r, kstate
                                                            [2] = x, kstate[3]=



ARM Macro Assembler    Page 3 


                                                             p, kstate[4] = k
   76 00000044                 END
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\workbench_asm.d -o.\objects\workbench_asm.o -I"H:\My 
Documents\Microprocessor Systems\MicroP_Labs\Lab1\Lab1_STM32F4Cube_Base_project
\RTE" -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\4.5.0\CMSIS\Include -IC:\Keil_v5\ARM\PACK
\Keil\STM32F4xx_DFP\2.7.0\Drivers\CMSIS\Device\ST\STM32F4xx\Include --predefine
="__UVISION_VERSION SETA 515" --predefine="_RTE_ SETA 1" --predefine="STM32F407
xx SETA 1" --list=.\listings\workbench_asm.lst Sources\workbench_asm.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

big_loop 0000004A

Symbol: big_loop
   Definitions
      At line 48 in file Sources\workbench_asm.s
   Uses
      At line 59 in file Sources\workbench_asm.s
Comment: big_loop used once
end_big_loop 00000062

Symbol: end_big_loop
   Definitions
      At line 60 in file Sources\workbench_asm.s
   Uses
      At line 50 in file Sources\workbench_asm.s
Comment: end_big_loop used once
end_loop1 00000024

Symbol: end_loop1
   Definitions
      At line 29 in file Sources\workbench_asm.s
   Uses
      At line 22 in file Sources\workbench_asm.s
Comment: end_loop1 used once
end_loop2 00000046

Symbol: end_loop2
   Definitions
      At line 44 in file Sources\workbench_asm.s
   Uses
      At line 37 in file Sources\workbench_asm.s
Comment: end_loop2 used once
init_InputArray 00000068

Symbol: init_InputArray
   Definitions
      At line 67 in file Sources\workbench_asm.s
   Uses
      At line 16 in file Sources\workbench_asm.s
Comment: init_InputArray used once
init_kstate 00000080

Symbol: init_kstate
   Definitions
      At line 68 in file Sources\workbench_asm.s
   Uses
      At line 31 in file Sources\workbench_asm.s
Comment: init_kstate used once
loop1 0000000A

Symbol: loop1
   Definitions
      At line 20 in file Sources\workbench_asm.s
   Uses
      At line 28 in file Sources\workbench_asm.s
Comment: loop1 used once
loop2 0000002C

Symbol: loop2



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 35 in file Sources\workbench_asm.s
   Uses
      At line 43 in file Sources\workbench_asm.s
Comment: loop2 used once
text 00000000

Symbol: text
   Definitions
      At line 1 in file Sources\workbench_asm.s
   Uses
      None
Comment: text unused
workbench_asm 00000000

Symbol: workbench_asm
   Definitions
      At line 13 in file Sources\workbench_asm.s
   Uses
      At line 3 in file Sources\workbench_asm.s
Comment: workbench_asm used once
10 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

InputArray 00000000

Symbol: InputArray
   Definitions
      At line 73 in file Sources\workbench_asm.s
   Uses
      At line 15 in file Sources\workbench_asm.s
      At line 52 in file Sources\workbench_asm.s

OutputArray 00000018

Symbol: OutputArray
   Definitions
      At line 74 in file Sources\workbench_asm.s
   Uses
      At line 53 in file Sources\workbench_asm.s
Comment: OutputArray used once
kstate 00000030

Symbol: kstate
   Definitions
      At line 75 in file Sources\workbench_asm.s
   Uses
      At line 30 in file Sources\workbench_asm.s
      At line 55 in file Sources\workbench_asm.s

myData 00000000

Symbol: myData
   Definitions
      At line 70 in file Sources\workbench_asm.s
   Uses
      None
Comment: myData unused
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

Kalmanfilter_asm 00000000

Symbol: Kalmanfilter_asm
   Definitions
      At line 2 in file Sources\workbench_asm.s
   Uses
      At line 56 in file Sources\workbench_asm.s
Comment: Kalmanfilter_asm used once
1 symbol
351 symbols in table
